{% assign current_date = page.date %}
{% assign six_months_in_seconds = 15778476 %}
{% assign start_date = current_date | date: '%s' | minus: six_months_in_seconds | date: '%Y-%m-%d' %}
{% assign end_date = current_date | date: '%s' | plus: six_months_in_seconds | date: '%Y-%m-%d' %}
{% assign related_posts = "" | split: "|" %} <!-- Initialize an empty array -->

<!-- Collect posts within the six-month window -->
{% for post in site.posts %}
  {% unless post.url == page.url %}
    {% if post.date | date: '%Y-%m-%d' >= start_date and post.date | date: '%Y-%m-%d' <= end_date %}
      {% assign related_posts = related_posts | push: post %}
    {% endif %}
  {% endunless %}
{% endfor %}

<div class="related">
  <h2>{{ site.data.settings.related_posts }}</h2>
  <ul class="related-posts">
    <!-- Limit the loop to two posts -->
    {% for post in related_posts limit:2 %}
      <li>
        <h3>
          <a href="{{ post.url | prepend: site.baseurl }}">
            <div class="related-thumbnail">
              {% if post.image %}
                <img src="{{ site.github.url }}/assets/img/{{ post.image }}" alt="{{ post.title }}">
              {% endif %}
            </div>
            <div class="related-title">
              {{ post.title }}
            </div>
          </a>
        </h3>
      </li>
    {% endfor %}
  </ul>
</div>
